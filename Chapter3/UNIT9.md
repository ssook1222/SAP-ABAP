### 데이터 타입은 데이터 오브젝트를 정의할 수 있는 일종의 프레임

---


# 데이터 타입과 데이터 오브젝트

데이터 타입은 해당 데이터 타입을 통해 만들어진 오브젝트가 어떤 모양일 것이라는 정의하는데 사용.    
기술적인 정보를 정의.
이렇게 데이터 타입이 정해지면, 이를 기반으로 데이터 오브젝트를 만들 수 있음.    
따라서 프로젝트 실행 시 메모리에 공간이 잡히는 실체가 있는 존재가 데이터 오브젝트임.    

### 데이터 타입이 사용될 수 있는 곳

- 스크린의 IO 필드를 정의할 때
- 프로그램 내에서 데이터 오브젝트를 선언할 때
- 서브루틴, 메소드, 함수 모듈의 파라미터를 정의할 때


### ABAP 표준 데이터 타입 (ABAP 시스템이 사전에 미리 정의해 놓은 데이터 타입)

- complete
- incomplete

이 두 개를 나누는 조건은 길이가 미리 정해져 있냐의 여부임.
길이가 미리 정해져 있으면 complete, 
길이가 정해져 있지 않아서 파라미터로 길이를 넘겨줘야 될 경우 incomplete임.

### Complete Data Type

Xstring : 16진수를 담을 수 있는 문자열 타입
DECFLOAT16/34 : 소수점 자릿수가 16/34 자릿수 이하인 타입
타입 선언 시에 같이 뒤에 몇 개의 글자가 올 지 지정해줘야 함.
P의 경우 소수점 위의 자리, 아래의 자리 수 모두 지정해줘야 됨.

### Local Type에 대한 설명
프로그램 내에서 선언하는 변수를 Local Type이라고 함.
해당 타입은 프로그램 내에서 밖에 사용이 불가능함.    
이를 정의하기 위해서는 TYPES 키워드 다음에 타입 이름을 적고 TYPE 키워드와 타입 종류와 길이(incomplete일 때)를 작성
`TYPES 타입이름 TYPE 타입종류` (길이 - incomplete일 경우)

### 전역변수에 대한 설명
Global Type의 경우 Abap Dictionary에 정의를 해 놓아야 함.   
SAP 모든 시스템 내에 이 타입을 참조해서 데이터 오브젝트를 생성할 수 있음.
총 3가지 타입 밖에 없음.


- Elementary Type : 데이터 엘리먼트는 그냥 하나의 필드
- Structure Type : 데이터 엘리먼트가 여러 개 모여 있음 structure

### Type for Internal Tables
스트럭처 라인이 여러 개 모여 있을 경우 하나의 테이블 형태, 테이블 형식의 데이터 타입

### 데이터 오브젝트를 선언하는 방법
오브젝트를 선언할 때 DATA라는 키워드를 적은 다음,     
그 옆에 변수 이름과 TYPE 키워드를 적고 어느 타입이 올 지 작성하면 됨.

`DATA 변수이름 TYPE 타입이름`


### 타입이름으로 올 수 있는 것은 3가지

- 로컬타입
- 글로벌 타입
- 표준 ABAP 타입

DATA 오브젝트 선언할 때 TYPE 뒤에는 타입이 나와야 하고,
LIKE 뒤에는 데이터 오브젝트가 나와야 함.

`DATA 변수이름 LIKE 데이터 오브젝트`

### 데이터 오브젝트를 선언하는 예제
VALUE addition을 주면 해당 값으로 초기화된 데이터 오브젝트 사용 가능

예) `gv_number1 TYPE i value 17` → 17로 할당된 데이터 오브젝트
ABAP에서는 null이라는 값이 없음.  
데이터를 선언할 때 초기 할당 값을 지정해주지 않으면 자동으로 사전에 초기 지정된 값이 할당됨.    

### 글로벌 데이터 타입을 사용할 때의 장점
하나의 데이터 타입을 사용하기에 변경 사항이 일어나더라도 용이, 유지보수가 편함   
해당 데이터 타입이 어디서 사용되었는지 where used list를 사용하여 확인 가능함.    
의미론적인 정보를 데이터 타입 정의 시 사용 가능. F1 Help를 통해 보여줄 수 있음.

## Lesson2. Using Basic ABAP Statement

### 값 할당하는 방법

ABAP 코드 내에 프로그래밍 문이 선언되어 있음.    
CONSTANTS : 상수로 지정, 상수는 뒤에 항상 Value addition을 붙여서 상수에 값을 할당한 후 사용해야 함.

DATA 키워드가 나왔으므로 데이터 오브젝트를 선언하는 것과 같음.

`MOVE gc_gf TO gv_carrid1`     
: gc_gf에 있는 값을 gv_carrid1에 할당하라는 의미

`gv_carrid2 = gv_carrid1`
: gv_carrid2에 gv_carrid1을 할당하라는 의미     
( => MOVE gv_carrid1 TO gv_carrid2)   

`ADD 1 TO gv_counter`
: gv_counter에 1을 더하란 의미   
( => gv_counter = gv_counter+1)    

`CLEAR`
: 해당 변수의 값을 초기화 시키는 키워드


### 데이터 할당 방법

`MOVE A TO B` : B = A

`Calculation`    
COMPUTE라는 키워드를 사용.   
보통은 많이 생략하고 사용.    
사칙연산이 가능, 연산자 우선순위 전부 적용됨.      

### ABAP에서의 연산 오퍼레이터

`사칙연산`

- ** (지수)
- DIV : 몫
- MOD : 나머지

### ABAP 조건문

- IF
: IF문은 그 다음에 조건식이 나옴.    
AND, OR 연산자를 통해 묶을 수도 있음.   
```
IF 
- ELSEIF (두번째 이상 조건, 여러 개 사용 가능하며 선택사항) 
- ELSE(조건에 맞지 않을 경우 전부 이 쪽으로 오며, 선택사항) 
- ENDIF(필수 사항, 반드시 이걸로 끝을 마무리해야 됨)
```
  
- CASE
: CASE문 다음에 나오는 피연산자, 단일 값이어야 함.   
특정 단일값. 특정 단일값에 대해 분기를 할 수 있는 조건 브런치임

WHEN 다음에 나온 값이 CASE 다음에 나오는 값과 같은지 확인.   
WHEN은 여러 개 나올 수 있음. CASE는 한 개(기준 조건)    
WHEN OTHERS는 default로, 조건에 전부 해당하지 않을 경우 이 곳으로 감.

`CASE(필수) - WHEN - WHEN OTHERS - ENDCASE(필수)`

- IF문 예제

```
IF gv_carrid IS NOT INITIAL : gv_carrid가 값이 있을 경우
```
- IF NOT : 조건에 해당하지 않으면 ~~, 사용 지양. 가독성이 떨어지기 때문

### LOOP문

`DO - ENDDO`

무한루프,
빠져 나가는 조건이 없으면 계속 돌음.    
그래서 반드시 DO - ENDDO 구문 안에는 IF <빠져나가는 조건> EXIT을 줘야 함!!!

`DO n TIMES - ENDDO`

1번보다는 이 구문을 사용하는 것이 좋음.    
몇 번 루프하라고 정의하고 시작   

`WHILE - ENDWHILE`     
조건에 따라 루프를 돌음.     
조건이 참이면 루프, 아니면 루프를 빠져 나감    
따라서 1번부터 3번까지는 Loop Counter를 돌며, sy-index를 사용함.

이 루프가 몇 번째 루프를 돌고 있는지 정보가 들어감.

```
SELECT … FROM <dbtab> … ENDSELECT
LOOP AT <internal table> … ENDLOOP
```

### 시스템변수
런타임 시스템에서 미리 정해놓은 시스템 변수,    
프로그램이 실행되는 동안 ABAP 런타임 시스템에 의해 값이 자동으로 할당됨.    
시스템 변수 중 Return code를 담는 것 : sy-subrc

데이터베이스 테이블에서 입력받은 캐리어 아이디에 해당하는 값을 가져옴.    
조회문 다음에 sy-sybrc값을 조회할 때, 제대로 조회에 성공했으면 0을 가져오고 그것이 아니면 0이 아닌 값을 가지고 옴.

sy-subrc를 쓸 때에는 어떤 문장이 실행된 바로 다음에 사용    
이 사이에 다른 문장을 쓰고 바로 sy-subrc를 체크하면 안 됨!!   

### Dialog Messages

유저에게 어떤 메시지를 주기 위해 사용하는 문법

```
MESSAGE tnnn(message_class) [WITH v1 [v2] [v3] [v4]]
```

```
MESSAGE 메시지타입 메시지 넘버(메시지 아이디) (메시지 클래스 : 메시지를 한 군데 관리하는 하나의 메시지 툴
[WITH : place holder로 with 다음 문자열을 주면 그 문자열로 혼합해서 사용자에게 보여줌.]
```

- 메시지 풀에 있는 몇 번째 메시지인지 확인, 메시지 아이디를 몇 번 타입으로 뿌리라는 의미
- 메시지를 뿌리기 위해서는 메시지 클래스 내의 메시지 풀에 메시지가 존재해야 됨

### 메시지 클래스를 만드는 방법
- 006 출력 시 메시지를 뿌리는 곳의 데이터를 받아 출력 시 &가 있는 곳에 보여준다는 의미
- 사용자로부터 값을 입력받겠다는 의미

## Lesson3. ABAP Debugger

### 디버깅 모드로 가는 방법

1. 프로그램 우클릭 후 Execute > Debugging 클릭 : 시작 점부터 디버깅    
2. 본인이 조사하고 싶은 부분을 클릭 후 디버깅을 누르면 원하는 위치부터 실행됨
→ 2번을 더 많이 사용함.
   
디버깅을 사용하기 위해서는 ABAP 소스코드가 무조건 활성화되어 있는 상태여야 함.

### 런타임 시 디버깅모드로 이동하는 방법
프로그램에는 여러 화면이 있는데, selection screen이 아닌 다음 화면으로 가고자 하면 
Command field에 \h를 입력하거나,
System > 유틸리티 > 디버그 ABAP을 선택하면 됨.     
그 액션 이후부터 흐르는 부분부터 자동으로 디버깅 모드로 진행하게 됨.

### 디버깅모드
- F5 : 모듈화 유닛을 만나면 안으로 타고 들어감
- F6 : execute, 모듈화를 만나도 한 라인으로 만나고 그냥 실행
- F7 : return, 모듈화 내 unit을 빠져나가고 싶을 때 사용
- F8 : continue, 그냥 프로그램을 쭉 실행. 중단점이 있으면 중단점까지만 실행.
- Single step : 한 라인씩 조사, 값을 조사할 때는 그 변수를 더블 클릭하면 어떤 값이 들어있는지 확인 가능    
디버깅 모드에서도 중단점 설정 가능.    
특정 영역 만을 선택 후, F8을 누르면 중단점 있는 곳까지 한 번에 실행됨.
  
### 특정 변수의 값 변경 조회 시 사용하는 Watch Point
Variable에 본인이 조사하고 싶은 변수를 입력, 그 안에 condition을 넣어, 특정 조건이 되면 실행을 멈추게 할 수 있음.    
F8을 눌러 실행시키면 자신이 설정한 변수가 특정 조건일 때 멈추게끔 할 수 있음.    
조건(AND, OR 다 사용 가능)을 입력하지 않으면, 해당 변수가 처음으로 변화할 때 중단됨.     

### 디버깅모드에서 값을 변화하는 방법
Internal table과 watch point 변수도 중단점 사용이 가능함.
HTTP/ RFC 요청도 디버깅이 가능하며, 디버깅 스크립팅과 메모리 분석도 지원됨.    

 

 

 

 

 

 

 

 

 

 